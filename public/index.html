<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        const express = require('express');
        const app = express();
        const bodyParser = require('body-parser');

        app.use(bodyParser.urlencoded({ extended: true }));

        app.get('/', (_req, res) => {
            res.sendFile(__dirname + '/index.html');
        });

        app.post('/generate', (req, res) => {
            const frase = req.body.frase;

            if (typeof frase !== 'string') {
                res.status(400).send('Por favor, ingrese una frase válida.');
                return;
            }

            const letraP = generateFigure(frase);

            res.send(`<pre>${letraP}</pre>`);
        });

        // Función para generar la figura
        function generateFigure(frase) {
            let vocales = 'aeiouAEIOU';
            let resultado = '';

            for (let i = 0; i < frase.length; i++) {
                if (vocales.includes(frase[i])) {
                    resultado += 'P' + frase[i] + 'P';
                } else {
                    resultado += frase[i];
                }
            }
            return resultado;
        }

        /*const PORT = process.env.PORT || 3000;
        app.listen(PORT, () => {
            console.log(`Servidor en funcionamiento en el puerto ${PORT}`);
        });*/
    </script>
    <title>Generador de Letra P</title>
</head>
<body>
    <h1>Generador de Letra P</h1>
    <form action="/generate" method="POST">
        <label for="frase">Frase:</label>
        <input type="text" name="frase" id="frase" required>
        <button type="submit">Generar Letra P</button>
    </form>
</body>
</html>